(()=>{"use strict";function t(t){var e,n=t.createId,i=t.questionId,c=t.questionMode,o=t.title,a=t.mode,s=t.hasDisabled,d="add"==a?(null!==(e=$(".choices-box-".concat(i)).find(".choice-container").last().data("choiceId"))&&void 0!==e?e:0)+1:n,u=$(".choices-box-".concat(i)).find(".choice-container").length<2,l='<div class="choice-container input-group has-validation mb-3" id="choice-'.concat(i,"-").concat(d,'" data-choice-id="').concat(d,'">\n                        <input type="text"\n                        class="form-control choice-input"\n                        id="question[').concat(c,"][").concat(i,"][choice][").concat(a,"][").concat(d,']"\n                        name="question[').concat(c,"][").concat(i,"][choice][").concat(a,"][").concat(d,']" value="').concat(null!=o?o:"",'" required ').concat(s?"disabled":"",">\n                        ").concat(u?"":'<button class="btn btn-danger choice-item-delete" type="button"><i class="bi-trash"></i></button>','\n                        <div class="invalid-feedback">\n                            لطفا متن پاسخ را وارد کنید\n                        </div>\n                    </div>');$(".choices-box-".concat(i)).append(l)}function e(e){var n,o=e.createId,a=e.title,s=e.description,d=e.has_choice,u=e.has_descriptive,l=e.has_multiple_choice,r=e.choice_count,h=e.mode,m="add"==h?(null!==(n=$(".question-container").last().data("questionId"))&&void 0!==n?n:0)+1:o,p=0==$(".question-container").length,q='<div class="d-flex question-container my-2" id="question-item-'.concat(m,'" data-question-id="').concat(m,'" data-question-mode="').concat(h,'">\n                        <div div class = "').concat(p?"col-12":"col-11",' d-flex align-items-center question-item-box" >\n                            <span class="col p-2 text-center question-item-num"></span>\n                            <span class="col-11 p-2 question-item-title">').concat(null!=a?a:"عنوان سوال","</span>\n                        </div>\n                        ").concat(p?"":'<div class="col-1 d-flex align-items-center justify-content-center question-item-delete">\n                            <i class="bi-trash"></i>\n                            </div>',"\n                    </div>");$(".questions-box").append(q),function(e){var n=e.id,i=e.title,c=e.description,o=e.has_choice,a=e.has_descriptive,s=e.has_multiple_choice,d=e.choice_count,u=e.mode,l='<div class="question-form" id="question-box-'.concat(n,'" data-question-mode="').concat(u,'" data-question-id="').concat(n,'" data-question-num="" aria-hidden="true">\n                        <input type="hidden"\n                        name="question[').concat(u,"][").concat(n,'][id]"\n                        value="').concat(n,'"/>\n                        <div class="d-flex justify-content-center">\n                            <span class="h5">جزئیات سوال <small class="question-item-num"></small></span>\n                        </div>\n                        <div class="question-content py-3">\n                            <div class="form-floating mb-3">\n                                <input type="text"\n                                class="form-control question-title-input"\n                                id="question[').concat(u,"][").concat(n,'][title]"\n                                name="question[').concat(u,"][").concat(n,'][title]"\n                                    placeholder="عنوان سوال" value="').concat(null!=i?i:"",'" required>\n                                <label for="question[').concat(u,"][").concat(n,'][title]">عنوان</label>\n                                <div class="invalid-feedback">\n                                    لطفا عنوان سوال را وارد نمایید\n                                </div>\n                            </div>\n                            <div class="form-floating">\n                                <textarea textarea class = "form-control"\n                                id = "question[').concat(u,"][").concat(n,'][description]"\n                                name = "question[').concat(u,"][").concat(n,'][description]"\n                                style = "height: 100px"\n                                    placeholder="توضیحات سوال">').concat(null!=c?c:"",'</textarea>\n                                <label for="question[').concat(u,"][").concat(n,'][description]">توضیحات</label>\n                                <div id="descriptionQuestionHelp" class="form-text">(اختیاری)\n                                در صورت نیاز به توضیح بیشتر از این بخش استفاده کنید\n                                </div>\n                            </div>\n                        </div>\n                        <div class="d-flex justify-content-center mt-3">\n                            <span class="h5">تنظیمات سوال <small class="question-item-num"></small></span>\n                        </div>\n                        <div class="question-content py-3">\n                            <div id="descriptionQuestionHelp" class="form-text mb-3">حداقل باید یک نوع پاسخ انتخاب کنید\n                            </div>\n                            <div class="form-check form-switch mb-3">\n                                <input ').concat("edit"==u?1==a?"checked":"":"checked",' class="has-descriptive-input form-check-input" type="checkbox" id="question[').concat(u,"][").concat(n,'][has_descriptive]"\n                                    name="question[').concat(u,"][").concat(n,'][has_descriptive]">\n                                <label class="form-check-label" for="question[').concat(u,"][").concat(n,'][has_descriptive]">دارای پاسخ تشریحی می باشد</label>\n                            </div>\n                            <div class="form-check form-switch mb-4">\n                                <input ').concat("edit"==u&&1==o?"checked":"",' class="has-choice-input form-check-input" type="checkbox" id="question[').concat(u,"][").concat(n,'][has_choice]" name="question[').concat(u,"][").concat(n,'][has_choice]">\n                                <label class="form-check-label" for="question[').concat(u,"][").concat(n,'][has_choice]">دارای پاسخ گزینه ای می باشد</label>\n                            </div>\n                            <div class="multiple-choice-container form-check form-switch mb-3"\n                            aria-hidden="true">\n                                <input ').concat("edit"==u&&1==s?"checked":"",' class="has-multiple-choice-input form-check-input" type="checkbox" id="question[').concat(u,"][").concat(n,'][has_multiple_choice]"\n                                    name="question[').concat(u,"][").concat(n,'][has_multiple_choice]" ').concat("edit"==u&&1==o?"":"disabled",'>\n                                <label class="form-check-label"\n                                for="question[').concat(u,"][").concat(n,'][has_multiple_choice]" > دارای چند انتخاب هم زمان می\n                                    باشد</label>\n                            </div>\n                        </div>\n                        <div class="choice-container"\n                        aria-hidden="true">\n                            <div class="d-flex justify-content-center mt-3">\n                                <span class="h5">گزینه های سوال <small class="question-item-num"></small></span>\n                            </div>\n                            <div class="question-content py-3">\n                                <div class="choices-box-').concat(n,'"></div>\n                                <div class="d-flex align-items-center choice-add-box my-2">\n                                    <span class="col text-center p-1"><i class="bi-plus-lg"></i></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>');if($(".question-forms").append(l),"add"==u)for(var r=0;r<2;r++)t({questionId:n,questionMode:u,mode:"add",hasDisabled:!0});if("edit"==u&&0==d)for(var h=0;h<2;h++)t({questionId:n,questionMode:u,mode:"add",hasDisabled:!0})}({id:m,title:a,description:s,has_choice:d,has_descriptive:u,has_multiple_choice:l,choice_count:r,mode:h}),i(),c({id:m,mode:h})}function n(t){var e=t.id,n=t.questionMode,o=t.mode;c({id:e,mode:o}),$("#question-item-".concat(e)).remove(),console.log(n),"edit"==n&&$(".delete-questions").append('<input type="hidden" name="question[delete][]" value="'.concat(e,'">')),function(t){var e=t.id;t.mode,$("#question-box-".concat(e)).remove()}({id:e,mode:o}),i()}function i(){for(var t=$(".question-container"),e=0;e<t.length;e++){var n=$(t[e]).data("questionId");$(t[e]).find(".question-item-num").text(e+1),$("#question-box-".concat(n)).find(".question-item-num").text("(".concat(e+1,")")),$("#question-box-".concat(n)).attr("data-question-num",e+1)}}function c(t){var e=t.id,n=t.mode;if("add"==n)return $(".question-item-box").removeClass("active"),$('.question-container[data-question-id="'.concat(e,'"]')).find(".question-item-box").addClass("active"),$(".question-form").attr("aria-hidden",!0),$("#question-box-".concat(e)).attr("aria-hidden",!1),!0;if("edit"==n)$(".question-item-box").removeClass("active"),$('.question-container[data-question-id="'.concat(e,'"]')).find(".question-item-box").addClass("active"),$(".question-form").attr("aria-hidden",!0),$("#question-box-".concat(e)).attr("aria-hidden",!1);else if("delete"==n){if(1==$('.question-container[data-question-id="'.concat(e,'"]')).find(".question-item-box.active").length){$(".question-item-box").removeClass("active");var i=$('.question-container[data-question-id="'.concat(e,'"]')).prev().data("questionId");return $('.question-container[data-question-id="'.concat(i,'"]')).find(".question-item-box").addClass("active"),$(".question-form").attr("aria-hidden",!0),$("#question-box-".concat(i)).attr("aria-hidden",!1),!0}}else if("show"==n)return $(".question-item-box").removeClass("active"),$('.question-container[data-question-id="'.concat(e,'"]')).find(".question-item-box").addClass("active"),$(".question-form").attr("aria-hidden",!0),$("#question-box-".concat(e)).attr("aria-hidden",!1),!0}function o(t){var e=t.id,n=t.text,i=t.type,c='<li class="mb-1" data-question-num="'.concat(e,'" data-error-type="').concat(i,'">\n                    ').concat(n,"\n                </li>");$(".error-questions").append(c)}var a;a=document.querySelectorAll(".needs-validation"),Array.prototype.slice.call(a).forEach((function(t){t.addEventListener("submit",(function(e){if(!t.checkValidity()){e.preventDefault(),e.stopPropagation(),void 0===(r={}.id)&&$(".error-questions").empty(),$('.error-questions li[data-question-num="'.concat(r,'"]')).remove();for(var n=$(".question-title-input:invalid").parents(".question-form"),i=n.length-1;i>=0;i--){var c=n[i],a=$(c).attr("data-question-num");o({id:$(c).data("questionId"),text:"لطفا عنوان سوال ".concat(a," را تکمیل کنید"),type:"title"})}for(var s=$(".choice-input:invalid").parents(".question-form"),d=s.length-1;d>=0;d--){var u=s[d],l=$(u).attr("data-question-num");o({id:$(u).data("questionId"),text:"لطفا گزینه های سوال ".concat(l," را تکمیل کنید"),type:"choice"})}}var r;t.classList.add("was-validated")}),!1)})),e({mode:"add"}),$(document).on("click",".question-add-box",(function(){e({mode:"add"}),$("form").removeClass("was-validated")})),$(document).on("click",".question-item-delete",(function(){n({id:$(this).parents(".question-container").data("questionId"),mode:"delete"})})),$(document).on("click",".question-item-box",(function(){var t;c({id:(t={id:$(this).parents(".question-container").data("questionId"),mode:"show"}).id,mode:t.mode})})),$(document).on("click",".choice-add-box",(function(){t({questionId:$(this).parents(".question-form").data("questionId"),questionMode:$(this).parents(".question-form").data("questionMode"),mode:"add"})})),$(document).on("click",".choice-item-delete",(function(){var t,e,n,i;t={id:$(this).parents(".choice-container").data("choiceId"),questionId:$(this).parents(".question-form").data("questionId"),questionMode:$(this).parents(".question-form").data("questionMode"),mode:"add"},e=t.id,n=t.questionId,i=t.questionMode,t.mode,$("#choice-".concat(n,"-").concat(e)).remove(),"edit"==i&&$(".delete-choices").append('<input type="hidden" name="choices[delete][]" value="'.concat(e,'">'))})),$(document).on("input",".question-title-input",(function(){var t=$(this).parents(".question-form").data("questionId"),e=$('.question-container[data-question-id="'.concat(t,'"]')).find(".question-item-title");if(""==$(this).val())return e.text("عنوان سوال"),!1;e.text($(this).val())})),$(document).on("change",".has-choice-input",(function(){var t=$(this).parents(".question-form");if($(this).is(":checked"))return t.find(".multiple-choice-container").attr("aria-hidden",!1),t.find(".has-multiple-choice-input").prop("disabled",!1),t.find(".choice-container").attr("aria-hidden",!1),t.find(".choice-input").prop("disabled",!1),!0;t.find(".has-descriptive-input").is(":checked")||t.find(".has-descriptive-input").prop("checked",!0),t.find(".multiple-choice-container").attr("aria-hidden",!0),t.find(".has-multiple-choice-input").prop("disabled",!0),t.find(".choice-container").attr("aria-hidden",!0),t.find(".choice-input").prop("disabled",!0)})),$(document).on("change",".has-descriptive-input",(function(){var t=$(this).parents(".question-form");if($(this).is(":checked"))return!0;t.find(".has-choice-input").is(":checked")||(t.find(".has-choice-input").prop("checked",!0),t.find(".multiple-choice-container").attr("aria-hidden",!1),t.find(".has-multiple-choice-input").prop("disabled",!1),t.find(".choice-container").attr("aria-hidden",!1),t.find(".choice-input").prop("disabled",!1))}))})();
//# sourceMappingURL=create.js.map