{"version":3,"file":"/js/sheets/edit.js","mappings":"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","sources":["webpack:///./resources/js/sheets/components/choice_item.js","webpack:///./resources/js/sheets/components/question_item.js","webpack:///./resources/js/sheets/components/question_box.js","webpack:///./resources/js/sheets/components/error_question.js","webpack:///./resources/js/sheets/edit.js"],"sourcesContent":["export function addChoiceItem({\r\n    createId,\r\n    questionId,\r\n    questionMode,\r\n    title,\r\n    mode,\r\n    hasDisabled\r\n}) {\r\n    const id = (mode == 'add') ? ($(`.choices-box-${questionId}`).find('.choice-container').last().data('choiceId') ?? 0) + 1 : createId\r\n    const isDefault = ($(`.choices-box-${questionId}`).find('.choice-container').length < 2) ? true : false\r\n\r\n    let content = `<div class=\"choice-container input-group has-validation mb-3\" id=\"choice-${questionId}-${id}\" data-choice-id=\"${id}\">\r\n                        <input type=\"text\"\r\n                        class=\"form-control choice-input\"\r\n                        id=\"question[${questionMode}][${questionId}][choice][${mode}][${id}]\"\r\n                        name=\"question[${questionMode}][${questionId}][choice][${mode}][${id}]\" value=\"${title ?? ``}\" required ${hasDisabled ? 'disabled': ''}>\r\n                        ${!isDefault ?\r\n                       `<button class=\"btn btn-danger choice-item-delete\" type=\"button\"><i class=\"bi-trash\"></i></button>`\r\n                        : ``}\r\n                        <div class=\"invalid-feedback\">\r\n                            لطفا متن پاسخ را وارد کنید\r\n                        </div>\r\n                    </div>`\r\n\r\n    $(`.choices-box-${questionId}`).append(content)\r\n}\r\n\r\nexport function removeChoiceItem({\r\n    id,\r\n    questionId,\r\n    questionMode,\r\n    mode\r\n}) {\r\n    $(`#choice-${questionId}-${id}`).remove()\r\n    if (questionMode == 'edit') {\r\n        $('.delete-choices').append(`<input type=\"hidden\" name=\"choices[delete][]\" value=\"${id}\">`)\r\n    }\r\n}\r\n","import {\r\n    addQuestionBox,\r\n    removeQuestionBox\r\n} from './question_box'\r\n\r\nexport function addQuestionItem({\r\n    createId,\r\n    title,\r\n    description,\r\n    has_choice,\r\n    has_descriptive,\r\n    has_multiple_choice,\r\n    choice_count,\r\n    mode\r\n}) {\r\n    const id = (mode == 'add') ? ($('.question-container').last().data('questionId') ?? 0) + 1 : createId\r\n\r\n    const isFirst = ($('.question-container').length == 0) ? true : false\r\n\r\n    let content = `<div class=\"d-flex question-container my-2\" id=\"question-item-${id}\" data-question-id=\"${id}\" data-question-mode=\"${mode}\">\r\n                        <div div class = \"${!isFirst ? `col-11` : `col-12`} d-flex align-items-center question-item-box\" >\r\n                            <span class=\"col p-2 text-center question-item-num\"></span>\r\n                            <span class=\"col-11 p-2 question-item-title\">${title??`عنوان سوال`}</span>\r\n                        </div>\r\n                        ${!isFirst ?\r\n                            `<div class=\"col-1 d-flex align-items-center justify-content-center question-item-delete\">\r\n                            <i class=\"bi-trash\"></i>\r\n                            </div>`: ``\r\n                        }\r\n                    </div>`\r\n\r\n    $('.questions-box').append(content)\r\n    addQuestionBox({\r\n        id: id,\r\n        title: title,\r\n        description: description,\r\n        has_choice: has_choice,\r\n        has_descriptive: has_descriptive,\r\n        has_multiple_choice: has_multiple_choice,\r\n        choice_count: choice_count,\r\n        mode: mode\r\n    })\r\n    updateQuestionItemNum()\r\n    activeQusetionItem({\r\n        id: id,\r\n        mode: mode\r\n    })\r\n}\r\n\r\nexport function removeQuestionItem({\r\n    id,\r\n    questionMode,\r\n    mode\r\n}) {\r\n    activeQusetionItem({\r\n        id: id,\r\n        mode: mode\r\n    })\r\n    $(`#question-item-${id}`).remove()\r\n    console.log(questionMode);\r\n    if (questionMode == 'edit'){\r\n        $('.delete-questions').append(`<input type=\"hidden\" name=\"question[delete][]\" value=\"${id}\">`)\r\n    }\r\n    removeQuestionBox({\r\n        id: id,\r\n        mode: mode\r\n    })\r\n    updateQuestionItemNum()\r\n}\r\n\r\nexport function showQuestionItem({\r\n    id,\r\n    mode\r\n}) {\r\n    activeQusetionItem({\r\n        id: id,\r\n        mode: mode\r\n    })\r\n}\r\n\r\nfunction updateQuestionItemNum() {\r\n    const questionItems = $('.question-container')\r\n    for (let index = 0; index < questionItems.length; index++) {\r\n        let id = $(questionItems[index]).data('questionId')\r\n        $(questionItems[index]).find('.question-item-num').text(index + 1)\r\n        $(`#question-box-${id}`).find('.question-item-num').text(`(${index + 1})`)\r\n        $(`#question-box-${id}`).attr('data-question-num', index + 1)\r\n    }\r\n}\r\n\r\nfunction activeQusetionItem({\r\n    id,\r\n    mode\r\n}) {\r\n    if (mode == 'add') {\r\n\r\n        $('.question-item-box').removeClass('active')\r\n        $(`.question-container[data-question-id=\"${id}\"]`).find('.question-item-box').addClass('active')\r\n\r\n        $(`.question-form`).attr('aria-hidden', true);\r\n        $(`#question-box-${id}`).attr('aria-hidden', false)\r\n\r\n\r\n        return true;\r\n\r\n    } else if (mode == 'edit') {\r\n        $('.question-item-box').removeClass('active')\r\n        $(`.question-container[data-question-id=\"${id}\"]`).find('.question-item-box').addClass('active')\r\n\r\n        $(`.question-form`).attr('aria-hidden', true);\r\n        $(`#question-box-${id}`).attr('aria-hidden', false)\r\n\r\n    } else if (mode == 'delete') {\r\n        if ($(`.question-container[data-question-id=\"${id}\"]`).find('.question-item-box.active').length == 1) {\r\n\r\n            $('.question-item-box').removeClass('active')\r\n\r\n            let currentId = $(`.question-container[data-question-id=\"${id}\"]`).prev().data('questionId')\r\n\r\n            $(`.question-container[data-question-id=\"${currentId}\"]`).find('.question-item-box').addClass('active')\r\n\r\n            $(`.question-form`).attr('aria-hidden', true);\r\n            $(`#question-box-${currentId}`).attr('aria-hidden', false)\r\n\r\n            return true;\r\n        }\r\n    } else if (mode == 'show') {\r\n        $('.question-item-box').removeClass('active')\r\n        $(`.question-container[data-question-id=\"${id}\"]`).find('.question-item-box').addClass('active')\r\n\r\n        $(`.question-form`).attr('aria-hidden', true);\r\n        $(`#question-box-${id}`).attr('aria-hidden', false)\r\n\r\n        return true;\r\n    }\r\n}\r\n","import {\r\n    addChoiceItem\r\n} from './choice_item'\r\n\r\nexport function addQuestionBox({\r\n    id,\r\n    title,\r\n    description,\r\n    has_choice,\r\n    has_descriptive,\r\n    has_multiple_choice,\r\n    choice_count,\r\n    mode\r\n}) {\r\n    let content = `<div class=\"question-form\" id=\"question-box-${id}\" data-question-mode=\"${mode}\" data-question-id=\"${id}\" data-question-num=\"\" aria-hidden=\"true\">\r\n                        <input type=\"hidden\"\r\n                        name=\"question[${mode}][${id}][id]\"\r\n                        value=\"${id}\"/>\r\n                        <div class=\"d-flex justify-content-center\">\r\n                            <span class=\"h5\">جزئیات سوال <small class=\"question-item-num\"></small></span>\r\n                        </div>\r\n                        <div class=\"question-content py-3\">\r\n                            <div class=\"form-floating mb-3\">\r\n                                <input type=\"text\"\r\n                                class=\"form-control question-title-input\"\r\n                                id=\"question[${mode}][${id}][title]\"\r\n                                name=\"question[${mode}][${id}][title]\"\r\n                                    placeholder=\"عنوان سوال\" value=\"${title??``}\" required>\r\n                                <label for=\"question[${mode}][${id}][title]\">عنوان</label>\r\n                                <div class=\"invalid-feedback\">\r\n                                    لطفا عنوان سوال را وارد نمایید\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"form-floating\">\r\n                                <textarea textarea class = \"form-control\"\r\n                                id = \"question[${mode}][${id}][description]\"\r\n                                name = \"question[${mode}][${id}][description]\"\r\n                                style = \"height: 100px\"\r\n                                    placeholder=\"توضیحات سوال\">${description??``}</textarea>\r\n                                <label for=\"question[${mode}][${id}][description]\">توضیحات</label>\r\n                                <div id=\"descriptionQuestionHelp\" class=\"form-text\">(اختیاری)\r\n                                در صورت نیاز به توضیح بیشتر از این بخش استفاده کنید\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"d-flex justify-content-center mt-3\">\r\n                            <span class=\"h5\">تنظیمات سوال <small class=\"question-item-num\"></small></span>\r\n                        </div>\r\n                        <div class=\"question-content py-3\">\r\n                            <div id=\"descriptionQuestionHelp\" class=\"form-text mb-3\">حداقل باید یک نوع پاسخ انتخاب کنید\r\n                            </div>\r\n                            <div class=\"form-check form-switch mb-3\">\r\n                                <input ${mode == 'edit' ? has_descriptive == 1 ? `checked` : `` : `checked`} class=\"has-descriptive-input form-check-input\" type=\"checkbox\" id=\"question[${mode}][${id}][has_descriptive]\"\r\n                                    name=\"question[${mode}][${id}][has_descriptive]\">\r\n                                <label class=\"form-check-label\" for=\"question[${mode}][${id}][has_descriptive]\">دارای پاسخ تشریحی می باشد</label>\r\n                            </div>\r\n                            <div class=\"form-check form-switch mb-4\">\r\n                                <input ${mode == 'edit' ? has_choice == 1 ? `checked` : `` : ``} class=\"has-choice-input form-check-input\" type=\"checkbox\" id=\"question[${mode}][${id}][has_choice]\" name=\"question[${mode}][${id}][has_choice]\">\r\n                                <label class=\"form-check-label\" for=\"question[${mode}][${id}][has_choice]\">دارای پاسخ گزینه ای می باشد</label>\r\n                            </div>\r\n                            <div class=\"multiple-choice-container form-check form-switch mb-3\"\r\n                            aria-hidden=\"true\">\r\n                                <input ${mode == 'edit' ? has_multiple_choice == 1 ? `checked` : `` : ``} class=\"has-multiple-choice-input form-check-input\" type=\"checkbox\" id=\"question[${mode}][${id}][has_multiple_choice]\"\r\n                                    name=\"question[${mode}][${id}][has_multiple_choice]\" ${mode == 'edit' ? has_choice == 1 ? ``: `disabled` : `disabled`}>\r\n                                <label class=\"form-check-label\"\r\n                                for=\"question[${mode}][${id}][has_multiple_choice]\" > دارای چند انتخاب هم زمان می\r\n                                    باشد</label>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"choice-container\"\r\n                        aria-hidden=\"true\">\r\n                            <div class=\"d-flex justify-content-center mt-3\">\r\n                                <span class=\"h5\">گزینه های سوال <small class=\"question-item-num\"></small></span>\r\n                            </div>\r\n                            <div class=\"question-content py-3\">\r\n                                <div class=\"choices-box-${id}\"></div>\r\n                                <div class=\"d-flex align-items-center choice-add-box my-2\">\r\n                                    <span class=\"col text-center p-1\"><i class=\"bi-plus-lg\"></i></span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>`\r\n\r\n    $('.question-forms').append(content)\r\n\r\n    if (mode == 'add') {\r\n        for (let i = 0; i < 2; i++) {\r\n            addChoiceItem({\r\n                questionId: id,\r\n                questionMode: mode,\r\n                mode: 'add',\r\n                hasDisabled: true\r\n            })\r\n        }\r\n    }\r\n\r\n    if (mode == 'edit' && choice_count == 0) {\r\n        for (let i = 0; i < 2; i++) {\r\n            addChoiceItem({\r\n                questionId: id,\r\n                questionMode: mode,\r\n                mode: 'add',\r\n                hasDisabled: true\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function removeQuestionBox({\r\n    id,\r\n    mode\r\n}) {\r\n    $(`#question-box-${id}`).remove()\r\n}\r\n","export function addErrorQuestion({\r\n    id,\r\n    text,\r\n    type\r\n}) {\r\n    let content = `<li class=\"mb-1\" data-question-num=\"${id}\" data-error-type=\"${type}\">\r\n                    ${text}\r\n                </li>`\r\n\r\n    $('.error-questions').append(content);\r\n}\r\n\r\nexport function removeErrorQuestion({\r\n    id\r\n}) {\r\n    if (typeof id === 'undefined') {\r\n        $('.error-questions').empty()\r\n    }\r\n\r\n    $(`.error-questions li[data-question-num=\"${id}\"]`).remove()\r\n}\r\n","import {\r\n    addQuestionItem,\r\n    removeQuestionItem,\r\n    showQuestionItem\r\n} from './components/question_item'\r\n\r\nimport {\r\n    addChoiceItem,\r\n    removeChoiceItem\r\n} from './components/choice_item'\r\n\r\nimport {\r\n    addErrorQuestion,\r\n    removeErrorQuestion\r\n} from './components/error_question'\r\n\r\n(function () {\r\n    'use strict'\r\n\r\n    // Fetch all the forms we want to apply custom Bootstrap validation styles to\r\n    var forms = document.querySelectorAll('.needs-validation')\r\n\r\n    // Loop over them and prevent submission\r\n    Array.prototype.slice.call(forms)\r\n        .forEach(function (form) {\r\n            form.addEventListener('submit', function (event) {\r\n                if (!form.checkValidity()) {\r\n                    event.preventDefault()\r\n                    event.stopPropagation()\r\n\r\n                    removeErrorQuestion({})\r\n\r\n                    const questionItemByTitle = $('.question-title-input:invalid').parents('.question-form')\r\n                    for (let index = questionItemByTitle.length - 1; index >= 0; index--) {\r\n                        const element = questionItemByTitle[index];\r\n                        const questionNum = $(element).attr('data-question-num');\r\n                        const questionId = $(element).data('questionId');\r\n                        addErrorQuestion({\r\n                            id: questionId,\r\n                            text: `لطفا عنوان سوال ${questionNum} را تکمیل کنید`,\r\n                            type: 'title'\r\n                        })\r\n                    }\r\n\r\n                    const questionItemByChoice = $('.choice-input:invalid').parents('.question-form')\r\n                    for (let index = questionItemByChoice.length - 1; index >= 0; index--) {\r\n                        const element = questionItemByChoice[index];\r\n                        const questionNum = $(element).attr('data-question-num');\r\n                        const questionId = $(element).data('questionId');\r\n                        addErrorQuestion({\r\n                            id: questionId,\r\n                            text: `لطفا گزینه های سوال ${questionNum} را تکمیل کنید`,\r\n                            type: 'choice'\r\n\r\n                        })\r\n                    }\r\n                }\r\n\r\n                form.classList.add('was-validated')\r\n            }, false)\r\n        })\r\n\r\n        for (let index = 0; index < serverToJs.questions.length; index++) {\r\n            const question = serverToJs.questions[index];\r\n            addQuestionItem({\r\n                createId: question.id,\r\n                title: question.title,\r\n                description: question.description,\r\n                has_choice: question.has_choice,\r\n                has_descriptive: question.has_descriptive,\r\n                has_multiple_choice: question.has_multiple_choice,\r\n                choice_count: question.choice_count,\r\n                mode: 'edit'\r\n            })\r\n\r\n            if (question.has_choice == 1) {\r\n                const parent = $(`#question-box-${question.id}`)\r\n                parent.find('.multiple-choice-container').attr('aria-hidden', false)\r\n                parent.find('.choice-container').attr('aria-hidden', false)\r\n                parent.find('.choice-input').prop('disabled', false);\r\n            }\r\n        }\r\n\r\n        for (let index = 0; index < serverToJs.choices.length; index++) {\r\n            const choice = serverToJs.choices[index];\r\n            addChoiceItem({\r\n                createId: choice.id,\r\n                questionId: choice.question_id,\r\n                questionMode: 'edit',\r\n                title: choice.title,\r\n                mode: 'edit',\r\n                hasDisabled: false\r\n            })\r\n        }\r\n})()\r\n\r\n$(document).on('click', '.question-add-box', function () {\r\n    addQuestionItem({\r\n        mode: 'add'\r\n    })\r\n\r\n    $('form').removeClass('was-validated')\r\n})\r\n\r\n$(document).on('click', '.question-item-delete', function () {\r\n    removeQuestionItem({\r\n        id: $(this).parents('.question-container').data('questionId'),\r\n        questionMode: $(this).parents('.question-container').data('questionMode'),\r\n        mode: 'delete'\r\n    })\r\n})\r\n\r\n$(document).on('click', '.question-item-box', function () {\r\n    showQuestionItem({\r\n        id: $(this).parents('.question-container').data('questionId'),\r\n        mode: 'show'\r\n    })\r\n})\r\n\r\n$(document).on('click', '.choice-add-box', function () {\r\n    addChoiceItem({\r\n        questionId: $(this).parents('.question-form').data('questionId'),\r\n        questionMode: $(this).parents('.question-form').data('questionMode'),\r\n        mode: 'add'\r\n    })\r\n})\r\n\r\n$(document).on('click', '.choice-item-delete', function () {\r\n    removeChoiceItem({\r\n        id: $(this).parents('.choice-container').data('choiceId'),\r\n        questionId: $(this).parents('.question-form').data('questionId'),\r\n        questionMode: $(this).parents('.question-form').data('questionMode'),\r\n        mode: 'add'\r\n    })\r\n})\r\n\r\n$(document).on('input', '.question-title-input', function () {\r\n    const questionId = $(this).parents('.question-form').data('questionId')\r\n    const questionItemTitle = $(`.question-container[data-question-id=\"${questionId}\"]`).find('.question-item-title')\r\n    if ($(this).val() == '') {\r\n        questionItemTitle.text('عنوان سوال');\r\n        return false;\r\n    }\r\n    questionItemTitle.text($(this).val())\r\n})\r\n\r\n$(document).on('change', '.has-choice-input', function () {\r\n    const parent = $(this).parents('.question-form')\r\n    if ($(this).is(':checked')) {\r\n        parent.find('.multiple-choice-container').attr('aria-hidden', false)\r\n        parent.find('.has-multiple-choice-input').prop('disabled', false);\r\n        parent.find('.choice-container').attr('aria-hidden', false)\r\n        parent.find('.choice-input').prop('disabled', false);\r\n        return true;\r\n    }\r\n\r\n    if (!parent.find('.has-descriptive-input').is(':checked')) {\r\n        parent.find('.has-descriptive-input').prop('checked', true)\r\n    }\r\n    parent.find('.multiple-choice-container').attr('aria-hidden', true)\r\n    parent.find('.has-multiple-choice-input').prop('disabled', true);\r\n\r\n    parent.find('.choice-container').attr('aria-hidden', true)\r\n    parent.find('.choice-input').prop('disabled', true);\r\n\r\n})\r\n\r\n$(document).on('change', '.has-descriptive-input', function () {\r\n    const parent = $(this).parents('.question-form')\r\n    if ($(this).is(':checked')) {\r\n        return true;\r\n    }\r\n\r\n    if (!parent.find('.has-choice-input').is(':checked')) {\r\n        parent.find('.has-choice-input').prop('checked', true)\r\n        parent.find('.multiple-choice-container').attr('aria-hidden', false)\r\n        parent.find('.has-multiple-choice-input').prop('disabled', false);\r\n\r\n        parent.find('.choice-container').attr('aria-hidden', false)\r\n        parent.find('.choice-input').prop('disabled', false);\r\n    }\r\n})\r\n"],"names":["addChoiceItem","createId","questionId","questionMode","title","mode","hasDisabled","id","$","find","last","data","isDefault","length","content","append","addQuestionItem","description","has_choice","has_descriptive","has_multiple_choice","choice_count","isFirst","i","addQuestionBox","updateQuestionItemNum","activeQusetionItem","removeQuestionItem","remove","console","log","removeQuestionBox","questionItems","index","text","attr","removeClass","addClass","currentId","prev","addErrorQuestion","type","forms","document","querySelectorAll","Array","prototype","slice","call","forEach","form","addEventListener","event","checkValidity","preventDefault","stopPropagation","empty","questionItemByTitle","parents","element","questionNum","questionItemByChoice","classList","add","serverToJs","questions","question","parent","prop","choices","choice","question_id","on","this","questionItemTitle","val","is"],"sourceRoot":""}