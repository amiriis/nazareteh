{"version":3,"file":"/js/sheets/show.js","mappings":"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","sources":["webpack:///./resources/js/sheets/components/question_container.js","webpack:///./resources/js/sheets/show.js"],"sourcesContent":["export function addQuestionContainer({\r\n    id,\r\n    title,\r\n    description,\r\n    has_choice,\r\n    has_descriptive,\r\n    has_multiple_choice,\r\n    choices,\r\n}) {\r\n\r\n    console.log('has_choice', has_choice);\r\n    console.log('has_multiple_choice', has_multiple_choice);\r\n    console.log('has_descriptive', has_descriptive);\r\n\r\n    let content = `<div class=\"question-container\" data-question-num=\"\" data-question-id=\"${id}\" aria-hidden=\"true\">\r\n                <div class=\"h4 mb-3\"><span class=\"question-num\"></span>.<span class=\"question-title p-1\">${title}</span>\r\n                </div>\r\n                <p class=\"question-description mb-3\">${description ?? ''}</p>`\r\n    if (has_choice == 1) {\r\n        content += `<div class=\"list-group mb-3\">`\r\n        if (has_multiple_choice == 1) {\r\n            for (let index = 0; index < choices.length; index++) {\r\n                const choice = choices[index];\r\n                content += `<label class=\"list-group-item\">\r\n                                <input class=\"form-check-input input-choice me-2\" type=\"checkbox\" name=\"answers[${id}][choices][]\" value=\"${choice.id}\">${choice.title}</label>`\r\n            }\r\n        } else {\r\n            for (let index = 0; index < choices.length; index++) {\r\n                const choice = choices[index];\r\n                content += `<label class=\"list-group-item\">\r\n                                <input class=\"form-check-input input-choice me-2\" type=\"radio\" name=\"answers[${id}][choices][]\" value=\"${choice.id}\">${choice.title}</label>`\r\n            }\r\n        }\r\n        content += `</div>`\r\n    }\r\n    if (has_descriptive == 1) {\r\n        content += `<div class=\"form-floating\">\r\n                    <textarea class = \"form-control textarea-descriptive\"\r\n                    placeholder=\"پاسخ خود را بنویسید\"\r\n                    id=\"answers[${id}][description]\" name=\"answers[${id}][description]\"\r\n                        style=\"height: 100px\"></textarea>\r\n                    <label for=\"answer[${id}][description]\">پاسخ خود را بنویسید</label>\r\n                </div>\r\n            </div>`\r\n    }\r\n\r\n    $('.questions-container').append(content)\r\n    updateQuestionItemNum()\r\n}\r\n\r\nfunction updateQuestionItemNum() {\r\n    const questionItems = $('.question-container')\r\n    for (let index = 0; index < questionItems.length; index++) {\r\n        $(questionItems[index]).find('.question-num').text(index + 1)\r\n        $(questionItems[index]).attr('data-question-num', index + 1)\r\n    }\r\n}\r\n","var currentQuestion = {};\nvar validQuestions = [];\nvar totalQuestions = 0;\n\nimport {\n    addQuestionContainer\n} from \"./components/question_container\"\n\n$(function () {\n    for (let index = 0; index < serverToJs.questions.length; index++) {\n        const question = serverToJs.questions[index];\n        addQuestionContainer({\n            id: question.id,\n            title: question.title,\n            description: question.description,\n            has_choice: question.has_choice,\n            has_descriptive: question.has_descriptive,\n            has_multiple_choice: question.has_multiple_choice,\n            choices: question.choices,\n        })\n\n        validQuestions.push({\n            id: question.id,\n            valid_choice: question.has_choice == 1 ? false : true,\n            valid_descriptive: question.has_descriptive == 1 ? false : true\n        })\n    }\n\n    currentQuestion = {\n        num: 1,\n        id: $(`.question-container[data-question-num=1]`).data('questionId')\n    }\n\n    totalQuestions = serverToJs.questions.length\n\n    $('.question-total').text(totalQuestions)\n    $('.question-step').text(currentQuestion.num)\n\n    $(`.question-container[data-question-id=${currentQuestion.id}]`).attr('aria-hidden', false)\n\n    $('.previous-step').attr('aria-hidden', true)\n\n    if (currentQuestion.num == totalQuestions) {\n        $('.next-step').attr('default-text', 'ارسال و ثبت')\n    } else {\n        $('.next-step').attr('default-text', 'بعدی')\n    }\n\n    $('.next-step').prop('disabled', true)\n    $('.next-step').text('سوال را جواب دهید')\n});\n\n$(document).on('click', '.next-step', function () {\n    currentQuestion = {\n        num: currentQuestion.num + 1,\n        id: $(`.question-container[data-question-num=${currentQuestion.num + 1}]`).data('questionId')\n    }\n\n    $(`.question-container`).attr('aria-hidden', true)\n\n    if (currentQuestion.num > totalQuestions) {\n        $('.previous-step').attr('aria-hidden', true)\n        $('.next-step').attr('aria-hidden', true)\n        $('.text-message').empty()\n        $('.text-message').text('در حال ارسال برای ثبت ...')\n        $('#form_responder_store').submit()\n\n        return true;\n    }\n\n\n    $(`.question-container[data-question-id=${currentQuestion.id}]`).attr('aria-hidden', false)\n\n    if (currentQuestion.num == 1) {\n        $('.previous-step').attr('aria-hidden', true)\n    } else {\n        $('.previous-step').attr('aria-hidden', false)\n    }\n\n    if (currentQuestion.num == totalQuestions) {\n        $('.next-step').attr('default-text', 'ارسال و ثبت')\n    } else {\n        $('.next-step').attr('default-text', 'بعدی')\n    }\n\n    $('.question-step').text(currentQuestion.num)\n\n    stepValidation()\n})\n\n$(document).on('click', '.previous-step', function () {\n    currentQuestion = {\n        num: currentQuestion.num - 1,\n        id: $(`.question-container[data-question-num=${currentQuestion.num - 1}]`).data('questionId')\n    }\n\n    $(`.question-container`).attr('aria-hidden', true)\n\n    $(`.question-container[data-question-id=${currentQuestion.id}]`).attr('aria-hidden', false)\n\n    if (currentQuestion.num == 1) {\n        $('.previous-step').attr('aria-hidden', true)\n    } else {\n        $('.previous-step').attr('aria-hidden', false)\n    }\n\n    if (currentQuestion.num == totalQuestions) {\n        $('.next-step').attr('default-text', 'ارسال و ثبت')\n    } else {\n        $('.next-step').attr('default-text', 'بعدی')\n    }\n\n    $('.question-step').text(currentQuestion.num)\n\n    stepValidation()\n})\n\n$(document).on('change', '.input-choice', function () {\n    const index = validQuestions.findIndex(question => question.id == currentQuestion.id)\n    if ($(`input[name=\"${$(this).attr('name')}\"]:checked`).length > 0)\n        validQuestions[index].valid_choice = true\n    else\n        validQuestions[index].valid_choice = false\n\n    stepValidation()\n})\n\n$(document).on('input', `.textarea-descriptive`, function () {\n    const index = validQuestions.findIndex(question => question.id == currentQuestion.id)\n    if ($(this).val() == '')\n        validQuestions[index].valid_descriptive = false\n    else\n        validQuestions[index].valid_descriptive = true\n\n    stepValidation()\n})\n\nconst stepValidation = () => {\n    const quesiton = validQuestions.find(question => question.id == currentQuestion.id)\n\n    if (quesiton.valid_choice && quesiton.valid_descriptive) {\n        $('.next-step').prop('disabled', false)\n        $('.next-step').text($('.next-step').attr('default-text'))\n        return true\n    }\n\n    $('.next-step').prop('disabled', true)\n    $('.next-step').text('سوال را جواب دهید')\n    return false\n}\n"],"names":["addQuestionContainer","id","title","description","has_choice","has_descriptive","has_multiple_choice","choices","console","log","content","index","length","choice","$","append","questionItems","find","text","attr","updateQuestionItemNum","currentQuestion","validQuestions","totalQuestions","serverToJs","questions","question","push","valid_choice","valid_descriptive","num","data","prop","document","on","empty","submit","stepValidation","findIndex","this","val","quesiton"],"sourceRoot":""}