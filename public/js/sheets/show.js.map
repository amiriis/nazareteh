{"version":3,"file":"/js/sheets/show.js","mappings":"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","sources":["webpack:///./resources/js/sheets/components/question_container.js","webpack:///./resources/js/sheets/show.js"],"sourcesContent":["export function addQuestionContainer({\r\n    id,\r\n    title,\r\n    description,\r\n    has_choice,\r\n    has_descriptive,\r\n    has_multiple_choice,\r\n    choices,\r\n}) {\r\n\r\n    let content = `<div class=\"question-container\" data-question-num=\"\" data-question-id=\"${id}\" aria-hidden=\"true\">\r\n                <div class=\"h4 mb-3\"><span class=\"question-num\"></span>.<span class=\"question-title p-1\">${title}</span>\r\n                </div>\r\n                <p class=\"question-description mb-3\">${description ?? ''}</p>`\r\n    if (has_choice) {\r\n        content += `<div class=\"list-group mb-3\">`\r\n        if (has_multiple_choice) {\r\n            for (let index = 0; index < choices.length; index++) {\r\n                const choice = choices[index];\r\n                content += `<label class=\"list-group-item\">\r\n                                <input class=\"form-check-input input-choice me-2\" type=\"checkbox\" name=\"answers[${id}][choices][]\" value=\"${choice.id}\">${choice.title}</label>`\r\n            }\r\n        } else {\r\n            for (let index = 0; index < choices.length; index++) {\r\n                const choice = choices[index];\r\n                content += `<label class=\"list-group-item\">\r\n                                <input class=\"form-check-input input-choice me-2\" type=\"radio\" name=\"answers[${id}][choices][]\" value=\"${choice.id}\">${choice.title}</label>`\r\n            }\r\n        }\r\n        content += `</div>`\r\n    }\r\n    if (has_descriptive) {\r\n        content += `<div class=\"form-floating\">\r\n                    <textarea class = \"form-control textarea-descriptive\"\r\n                    placeholder=\"پاسخ خود را بنویسید\"\r\n                    id=\"answers[${id}][description]\" name=\"answers[${id}][description]\"\r\n                        style=\"height: 100px\"></textarea>\r\n                    <label for=\"answer[${id}][description]\">پاسخ خود را بنویسید</label>\r\n                </div>\r\n            </div>`\r\n    }\r\n\r\n    $('.questions-container').append(content)\r\n    updateQuestionItemNum()\r\n}\r\n\r\nfunction updateQuestionItemNum() {\r\n    const questionItems = $('.question-container')\r\n    for (let index = 0; index < questionItems.length; index++) {\r\n        $(questionItems[index]).find('.question-num').text(index + 1)\r\n        $(questionItems[index]).attr('data-question-num', index + 1)\r\n    }\r\n}\r\n","var currentQuestion = {};\r\nvar validQuestions = [];\r\nvar totalQuestions = 0;\r\n\r\nimport {\r\n    addQuestionContainer\r\n} from \"./components/question_container\"\r\n\r\n$(function () {\r\n    for (let index = 0; index < serverToJs.questions.length; index++) {\r\n        const question = serverToJs.questions[index];\r\n        addQuestionContainer({\r\n            id: question.id,\r\n            title: question.title,\r\n            description: question.description,\r\n            has_choice: question.has_choice,\r\n            has_descriptive: question.has_descriptive,\r\n            has_multiple_choice: question.has_multiple_choice,\r\n            choices: question.choices,\r\n        })\r\n\r\n        validQuestions.push({\r\n            id: question.id,\r\n            valid_choice: question.has_choice ? false : true,\r\n            valid_descriptive: question.has_descriptive ? false : true\r\n        })\r\n    }\r\n\r\n    currentQuestion = {\r\n        num: 1,\r\n        id: $(`.question-container[data-question-num=1]`).data('questionId')\r\n    }\r\n\r\n    totalQuestions = serverToJs.questions.length\r\n\r\n    $('.question-total').text(totalQuestions)\r\n    $('.question-step').text(currentQuestion.num)\r\n\r\n    $(`.question-container[data-question-id=${currentQuestion.id}]`).attr('aria-hidden', false)\r\n\r\n    $('.previous-step').attr('aria-hidden', true)\r\n\r\n    if (currentQuestion.num == totalQuestions) {\r\n        $('.next-step').attr('default-text', 'ارسال و ثبت')\r\n    } else {\r\n        $('.next-step').attr('default-text', 'بعدی')\r\n    }\r\n\r\n    $('.next-step').prop('disabled', true)\r\n    $('.next-step').text('سوال را جواب دهید')\r\n});\r\n\r\n$(document).on('click', '.next-step', function () {\r\n    currentQuestion = {\r\n        num: currentQuestion.num + 1,\r\n        id: $(`.question-container[data-question-num=${currentQuestion.num + 1}]`).data('questionId')\r\n    }\r\n\r\n    $(`.question-container`).attr('aria-hidden', true)\r\n\r\n    if (currentQuestion.num > totalQuestions) {\r\n        $('.previous-step').attr('aria-hidden', true)\r\n        $('.next-step').attr('aria-hidden', true)\r\n        $('.text-message').empty()\r\n        $('.text-message').text('در حال ارسال برای ثبت ...')\r\n        $('#form_responder_store').submit()\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n    $(`.question-container[data-question-id=${currentQuestion.id}]`).attr('aria-hidden', false)\r\n\r\n    if (currentQuestion.num == 1) {\r\n        $('.previous-step').attr('aria-hidden', true)\r\n    } else {\r\n        $('.previous-step').attr('aria-hidden', false)\r\n    }\r\n\r\n    if (currentQuestion.num == totalQuestions) {\r\n        $('.next-step').attr('default-text', 'ارسال و ثبت')\r\n    } else {\r\n        $('.next-step').attr('default-text', 'بعدی')\r\n    }\r\n\r\n    $('.question-step').text(currentQuestion.num)\r\n\r\n    stepValidation()\r\n})\r\n\r\n$(document).on('click', '.previous-step', function () {\r\n    currentQuestion = {\r\n        num: currentQuestion.num - 1,\r\n        id: $(`.question-container[data-question-num=${currentQuestion.num - 1}]`).data('questionId')\r\n    }\r\n\r\n    $(`.question-container`).attr('aria-hidden', true)\r\n\r\n    $(`.question-container[data-question-id=${currentQuestion.id}]`).attr('aria-hidden', false)\r\n\r\n    if (currentQuestion.num == 1) {\r\n        $('.previous-step').attr('aria-hidden', true)\r\n    } else {\r\n        $('.previous-step').attr('aria-hidden', false)\r\n    }\r\n\r\n    if (currentQuestion.num == totalQuestions) {\r\n        $('.next-step').attr('default-text', 'ارسال و ثبت')\r\n    } else {\r\n        $('.next-step').attr('default-text', 'بعدی')\r\n    }\r\n\r\n    $('.question-step').text(currentQuestion.num)\r\n\r\n    stepValidation()\r\n})\r\n\r\n$(document).on('change', '.input-choice', function () {\r\n    const index = validQuestions.findIndex(question => question.id == currentQuestion.id)\r\n    if ($(`input[name=\"${$(this).attr('name')}\"]:checked`).length > 0)\r\n        validQuestions[index].valid_choice = true\r\n    else\r\n        validQuestions[index].valid_choice = false\r\n\r\n    stepValidation()\r\n})\r\n\r\n$(document).on('input', `.textarea-descriptive`, function () {\r\n    const index = validQuestions.findIndex(question => question.id == currentQuestion.id)\r\n    if ($(this).val() == '')\r\n        validQuestions[index].valid_descriptive = false\r\n    else\r\n        validQuestions[index].valid_descriptive = true\r\n\r\n    stepValidation()\r\n})\r\n\r\nconst stepValidation = () => {\r\n    const quesiton = validQuestions.find(question => question.id == currentQuestion.id)\r\n\r\n    if (quesiton.valid_choice && quesiton.valid_descriptive) {\r\n        $('.next-step').prop('disabled', false)\r\n        $('.next-step').text($('.next-step').attr('default-text'))\r\n        return true\r\n    }\r\n\r\n    $('.next-step').prop('disabled', true)\r\n    $('.next-step').text('سوال را جواب دهید')\r\n    return false\r\n}\r\n"],"names":["addQuestionContainer","id","title","description","has_choice","has_descriptive","has_multiple_choice","choices","content","index","length","choice","$","append","questionItems","find","text","attr","updateQuestionItemNum","currentQuestion","validQuestions","totalQuestions","serverToJs","questions","question","push","valid_choice","valid_descriptive","num","data","prop","document","on","empty","submit","stepValidation","findIndex","this","val","quesiton"],"sourceRoot":""}